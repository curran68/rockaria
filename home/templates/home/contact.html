{% extends "base.html" %}

{% block content %}
  <div class="container mt-5 text-white">
    <h1>Contact Us</h1>
    <form id="contactForm">
      <div class="mb-3">
        <label for="name" class="form-label">Your Name</label>
        <input type="text" class="form-control" id="name" name="user_name" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Your Email</label>
        <input type="email" class="form-control" id="email" name="user_email" required>
      </div>
      <div class="mb-3">
        <label for="message" class="form-label">Message</label>
        <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
      </div>
      <button type="submit" class="btn btn-warning">Send Message</button>
    </form>
    <div id="statusMsg" class="mt-3"></div>
  </div>
{% endblock %}

{% block extra_js %}
  <script>
    document.getElementById('contactForm').addEventListener('submit', function(event) {
      event.preventDefault();
      const formData = new FormData(this);
      fetch('{% url "contact" %}', {
        method: 'POST',
        body: formData,
      })
      .then(response => response.json())
      .then(data => {
        const statusMsg = document.getElementById('statusMsg');
        if (data.success) {
          statusMsg.innerHTML = '<div class="alert alert-success">Message sent successfully!</div>';
          this.reset();
        } else {
          statusMsg.innerHTML = '<div class="alert alert-danger">Error sending message. Please try again.</div>';
        }
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('statusMsg').innerHTML = '<div class="alert alert-danger">An unexpected error occurred.</div>';
      });
    });
  </script>
{% endblock %}